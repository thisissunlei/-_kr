<button wx:if="{{btn_bool}}" open-type="getUserInfo" lang="zh_CN" bindgetuserinfo="onGotUserInfo" style='position:fixed;left:0;bottom:0;right:0;height: 112rpx;opacity:0;z-index: 9999;'></button>

<view class="teamCard">
    <view class="teamCard-topBg">
        <image src="{{KrImgUrl}}teamCardPurchase/bg0.png"></image>
    </view>
    <view wx:if="{{list.length > 0}}">
        <view class="teamCard-details" wx:if="{{list[swiperIndex].cardType == 'NORMAL'}}">
            <view class="td-percentage" wx:if="{{list[swiperIndex].cutDownNum > 0}}">
                <view class="td-pBg">
                    <image src="{{KrImgUrl}}teamCardPurchase/tip.png"></image>
                </view>
                <view class="td-pNum">-<text style="font-size: 24rpx;font-weight: bold;">{{list[swiperIndex].cutDownNum}}</text>%</view>
            </view>
            <view class="td-text">售价:¥</view>
            <view class="td-price">{{list[swiperIndex].salePriceDecimal}}</view>
            <view class="td-surplus" wx:if="{{list[swiperIndex].quantityType == 'LIMIT'}}">剩余{{list[swiperIndex].remainCardCount}}张</view>
        </view>
        <view wx:else class="teamCard-details teamCard-pao">
            <image mode="widthFix" src="{{KrImgUrl}}teamCardPurchase/pao.png"></image>
        </view>
    </view>

    <swiper wx:if="{{list.length > 0}}" bindchange="swiperChange" current="{{swiperIndex}}" class="teamCard-swiper">
        <block wx:for="{{list}}" wx:key="{{index}}">
            <swiper-item>
                <view class="teamCard-swiper-card">
                    <view class="tsc-bg">
                        <image wx:if="{{!!item.goodsUrl}}" src="{{item.goodsUrl}}"></image>
                    </view>
                    <view class="tsc-con" wx:if="{{item.cardType == 'NORMAL'}}">
                        <view class="tsc-tit">{{item.cardName}}</view>
                        <view class="tsc-price">
                            <text style="font-size: 24rpx;">面额: </text>
                            <text style="font-size: 36rpx;">{{item.faceValueDecimal}}</text>
                            <text style="font-size: 18rpx;">元</text>
                        </view>
                        <view class="tsc-bottom">
                            <view class="tsc-bottom-left">
                                <text style="font-size: 24rpx;">用卡人数: </text>
                                <text style="font-size: 36rpx;">{{item.limitCount}}</text>
                                <text style="font-size: 18rpx;">人</text>
                            </view>
                            <view class="tsc-bottom-right">
                                <text style="font-size: 24rpx;">有效期: </text>
                                <text style="font-size: 36rpx;">{{item.activeDuration}}</text>
                                <text style="font-size: 18rpx;">天</text>
                            </view>
                        </view>
                    </view>
                    <view class="tsc-con" wx:else>
                        <image class="custom" src="{{KrImgUrl}}teamCardPurchase/custom.png"></image>
                    </view>
                </view>
            </swiper-item>
        </block>
    </swiper>
    <view class="teamCard-swiper-page" wx:if="{{list.length > 0}}">
        <text wx:for="{{list}}" wx:key="{{index}}" class="{{swiperIndex == index?'select':''}}"></text>
    </view>


    <view class="teamCard-scroll">
        <view class="{{list.length > 0? 'note-tit': 'note-tit select'}}">什么是团队套餐？</view>
        <!--<view class="note-tit">什么是团队套餐？</view>-->
        <view class="note-con">团队套餐专为一人或多人多次使用会议室或散座的情况提供解决方案。购买团队套餐后，购买人可授权他人共享卡内余额，所有团队成员都可使用余额预订自由座的会议室和散座。详情如下：</view>
        <view class="note-con">面额：套餐可用额度；</view>
        <view class="note-con">用卡人数：可授权使用套餐的人数；</view>
        <view class="note-con">有效期：套餐有效天数自购买当天开始计算。</view>


        <view class="note-tit">团队套餐如何使用？</view>
        <view class="note-con">1.团队套餐可用于购买任意地点的散座和会议室；</view>
        <view class="note-con">2.购买散座或会议室时，支付方式选择团队套餐即可；</view>
        <view class="note-con">3.团队套餐面额不支持充值，如下单时卡内余额不足，剩余金额可使用微信支付；</view>
        <view class="note-con">4.购买人可选择或取消与他人共享团队套餐。</view>
        <view class="note-con">共享方法：在团队卡“用卡人”中点击“添加用卡人”。取消共享方法：在“用卡人”中调整即可；</view>
        <view class="note-con">5.购买成功后团队成员可在“我的团队卡-消费记录”中查看使用记录。</view>

        <view class="note-tit">团队套餐如何购买？</view>
        <view class="note-con">1.选择您需要的套餐直接线上购买，购买后不可退换，不可延期；</view>
        <view class="note-con">2.团队套餐仅支持微信支付；</view>
        <view class="note-con">3.可同时为多个团队购买多份套餐，套餐支持修改名称；</view>
        <view class="note-con">4.如现有套餐种类与您的需求不匹配，可根据您的使用频次和使用时长，联系在线客服定制您的专属套餐，客服在线时间为工作日10:00——19:00；</view>
        <view class="note-con">5.如需开发票，可联系在线客服，客服在线时间为工作日10:00——19:00。</view>

        <!--<view class="note-tit">如何授权给多人使用团队套餐？</view>-->
        <!--<view class="note-con">购买团队套餐后在套餐详情页微信转发给需要授权的人即可</view>-->

        <!--<view class="note-tit">如何定制团队套餐？</view>-->
        <!--<view class="note-con">如您有更多会议室及散座使用需求，可联系在线客服定制您的专属套餐，客服在线时间为工作日10:00——19:00。</view>-->

        <view class="u-protocol">
            <view class="u-protocol-content">
                <view class="u-protocol-image" bindtap="changeCheckbox">
                    <image class="u-protocol-checkbox" wx:if="{{!check}}"  src="../images/orderconfirmationImg/icon_uncheck.png"></image>
                    <image class="u-protocol-checkbox" wx:if="{{check}}"  src="../images/orderconfirmationImg/icon_check.png"></image>
                </view>
                <view class="u-protocol-text" bindtap="changeCheckbox">我已阅读并同意</view>
                <view class="u-meet-protocol" bindtap="goToGuide">《氪空间自由座服务须知》</view>
            </view>
        </view>
    </view>



    <view class="teamCard-bottom" wx:if="{{list.length > 0}}">
        <view class="teamCard-bottom-left">
            <view class="tbl-txt" wx:if="{{!!list[swiperIndex].salePriceDecimal || !!list[swiperIndex].faceValueDecimal}}">应付：</view>
            <view class="tbl-price" wx:if="{{!!list[swiperIndex].salePriceDecimal}}">
                <text>¥</text>
                <text>{{list[swiperIndex].salePriceDecimal}}</text>
            </view>
            <view class="tbl-Oprice" wx:if="{{list[swiperIndex].faceValueDecimal && list[swiperIndex].cutDownNum > 0}}">
                <text>¥</text>
                <text>{{list[swiperIndex].faceValueDecimal}}</text>
            </view>
        </view>



        <view wx:if="{{!!check && !!list[swiperIndex].cardNum}}" class="teamCard-bottom-right" bindtap="buy">立即购买</view>
        <view wx:if="{{!check && !!list[swiperIndex].cardNum}}" class="teamCard-bottom-right select">立即购买</view>
        <view wx:if="{{!list[swiperIndex].cardNum}}" class="teamCard-bottom-right select">已售罄</view>
    </view>

    <view class="teamCard-mark" wx:if="{{passWord || payOk}}"></view>
    <view class="teamCard-popBox" wx:if="{{passWord}}">
        <view class="popBox-tit">
            <text>请输入购买口令</text>
            <image src="{{KrImgUrl}}teamCardPurchase/icon_wp.png"></image>
        </view>
        <view class="input">
            <input value="{{phase}}" bindinput="bindKeyInput"/>
        </view>
        <view class="input-tip">请联系客服获取口令</view>
        <view class="popBox-bottom">
            <view bindtap="cancel">取消</view>
            <view bindtap="sure">确定</view>
        </view>
    </view>
    <view class="teamCard-popBox" wx:if="{{payOk}}">
        <image class="pay-ok-img" src="{{KrImgUrl}}teamCardPurchase/icon_correct.png"></image>
        <view class="pay-ok-txt">购买成功</view>
        <view class="popBox-bottom">
            <view bindtap="continue">继续购买</view>
            <view bindtap="check">查看团队卡</view>
        </view>
    </view>
    <view class="teamCard-mark select" wx:if="{{!!payFail || !!tip}}"></view>
    <view class="buy-fail" wx:if="{{!!payFail}}">
        <image class="pay-ok-img" src="../images/public/error.png"></image>
        <view>购买失败</view>
    </view>
    <view class="buy-fail passWord-error" wx:if="{{!!tip}}">
        <view>{{tip}}</view>
    </view>
</view>